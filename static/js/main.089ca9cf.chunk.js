(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{301:function(e,t,a){e.exports=a.p+"static/media/storyland-white.7075a412.png"},304:function(e,t,a){e.exports=a.p+"static/media/storyland-main-dark.e6a93caf.png"},335:function(e,t,a){e.exports=a(585)},343:function(e,t,a){},585:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(20),l=a.n(o),c=(a(340),a(341),a(342),a(343),a(8)),s=a(9),i=a(11),u=a(10),m=a(12),d=a(99),p=a(31),f=a(301),h=a.n(f),g=function(){return r.a.createElement("div",{className:"landing-web"},r.a.createElement("div",{className:"landing-info"},r.a.createElement("div",{className:"landing-logo"},r.a.createElement("img",{src:h.a,alt:"storyland-app"})),r.a.createElement("div",{className:"landing-buttons"},r.a.createElement("div",null,r.a.createElement(p.b,{to:"/register"},r.a.createElement("button",{className:"my-button reg-button"},"Register"))),r.a.createElement("div",null,r.a.createElement(p.b,{to:"/login"},r.a.createElement("button",{className:"my-button log-button"},"Login"))))))},b=a(49),v=a(62),E=a(40),k="current-user",y=r.a.createContext(),N=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:JSON.parse(localStorage.getItem(k)||"{}")},a.handleUserChange=function(e){a.setState({user:e}),e&&e.email?localStorage.setItem(k,JSON.stringify(e)):localStorage.removeItem(k)},a.isAuthenticated=function(){return a.state.user&&a.state.user.email},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(y.Provider,{value:{user:this.state.user,onUserChanged:this.handleUserChange,isAuthenticated:this.isAuthenticated}},this.props.children)}}]),t}(n.Component),O=function(e){return function(t){return r.a.createElement(y.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,a))})}},j=a(303),w=a.n(j).a.create({baseURL:"https://storyland.herokuapp.com",withCredentials:!0}),S={login:function(e){return w.post("/login",e).then(function(e){return e.data})},register:function(e){return w.post("/register",e).then(function(e){return e.data})},logout:function(){return w.post("/logout").then(function(e){return e.data})},updateProfile:function(e){var t=new FormData;return Object.keys(e).forEach(function(a){"password"===a&&""===e.password||t.append(a,e[a])}),w.put("/users/profile",t).then(function(e){return Promise.resolve(e.data)})}},C=a(304),B=a.n(C);b.b.add(E.a),b.b.add(E.e);var D=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleLogout=function(){S.logout().then(function(){var e=a.props.history;a.props.onUserChanged({}),e.push("/login")})},a.handleBack=function(){a.props.history.goBack()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("nav",{className:"basic-nav"},r.a.createElement("div",{className:"nav-wrapper basic-nav-list"},r.a.createElement("ul",{id:"nav-mobile",className:"left"},r.a.createElement("li",{className:"basic-nav-item basic-nav-item-back",onClick:this.handleBack},r.a.createElement(v.a,{icon:"arrow-left"}))),r.a.createElement(p.b,{className:"brand-logo center",to:"/home"},r.a.createElement("img",{className:"basic-nav-logo",src:B.a,alt:"storyland-app"})),r.a.createElement("ul",{id:"nav-mobile",className:"right right-register-topbar"},!e.email&&r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"basic-nav-item"},r.a.createElement(p.b,{className:"nav-link",to:"/register"},"Register")),r.a.createElement("li",{className:"basic-nav-item"},r.a.createElement(p.b,{className:"nav-link",to:"/login"},"Login"))),e.email&&r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"basic-nav-item basic-nav-item-back",onClick:this.handleLogout},r.a.createElement(v.a,{icon:"sign-out-alt"}))))))}}]),t}(n.Component),x=O(Object(d.f)(D)),F=a(104),A=a(305),P=a.n(A),R=function(){return P()({validateMessages:{required:function(e){return"Required field"}}})},T=a(590),U=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.value,n=e.errors,o=e.onblur,l=e.className,c=e.type,s=e.allowClear,i=n&&n.length>0;return r.a.createElement("div",{className:l},r.a.createElement(T.a,Object.assign({onChange:t,value:a},c?{type:c}:null,s?{allowClear:s}:null,o?{onBlur:o}:null)),i&&n.map(function(e,t){return r.a.createElement("p",{className:"error",key:t},e)}))}}]),t}(n.Component);U.defaultProps={className:""};var G=U,L=/(.+)@(.+){2,}\.(.+){2,}/i,M=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d){6,}/,I=function(e,t,a){return t&&t.length>=3?a():a(new Error("Name needs at least 3 chars"))},J=function(e,t,a){return(n=t)&&L.test(n)?a():a(new Error("Invalid mail"));var n},q=function(e,t,a){return(n=t)&&M.test(n)?a():a(new Error("Password needs uppercase, lowercase and numbers"));var n},H=a(30),z={getRegisterBooks:function(){return w.get("/books/register").then(function(e){return e.data})},getAllBooks:function(){return w.get("/books").then(function(e){return e.data})},getRelatedBooks:function(e){return e.includes("&")&&(e=e.replace("&","@")),w.get("/books?genres=".concat(e)).then(function(e){return e.data})},getBestRatedBooks:function(e){return w.get("/books?rating=".concat(e)).then(function(e){return e.data})},getLatestBooks:function(e){return w.get("/books?year=".concat(e)).then(function(e){return e.data})},getSearchedBook:function(e){return w.post("/books/".concat(e)).then(function(e){return e.data})},getOneBook:function(e){return w.get("/books/".concat(e)).then(function(e){return e.data})},postCoverBook:function(e){var t=new FormData;return t.append("cover",e),w.post("/books/scancover",t).then(function(e){return Promise.resolve(e.data)})}},Y=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.book,n=t.isActive;return r.a.createElement("div",{className:"register-book-item",onClick:function(){return e.props.bookClicked(a)}},r.a.createElement("img",{className:n?"register-book-active":"",src:a.imageLink,alt:a.title}))}}]),t}(n.Component),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},registerBooks:[],favBooks:[],error:"",secondScreen:!1,isRegistered:!1,postButton:!1},a.submitFirstForm=function(e){var t=a.props.form;e.preventDefault(),t.validateFields(function(e,t){e&&Object.keys(e).length>0||a.setState({user:t,secondScreen:!0}),a.handleRegisterBooks()})},a.submitRegister=function(e){var t=a.state,n=t.user,r=t.favBooks;if(e.preventDefault(),r.length>2){var o=r.map(function(e){return e.genres[0]});o=(o=function(e){var t={};return e.forEach(function(e){t[e]||(t[e]=!0)}),Object.keys(t)}(o)).slice(0,3),n.favGenres=o,S.register(n).then(function(e){a.setState({isRegistered:!0})},function(e){var t=e.response.data.message;a.setState({error:t,secondScreen:!1})})}},a.handleRegisterBooks=function(){z.getRegisterBooks().then(function(e){a.setState({registerBooks:e})})},a.handleCoverChange=function(e){a.state.favBooks.includes(e)?a.setState({favBooks:Object(F.a)(a.state.favBooks).filter(function(t){return t!==e})},function(){a.handlePostButton()}):a.setState({favBooks:[].concat(Object(F.a)(a.state.favBooks),[e])},function(){a.handlePostButton()})},a.handlePostButton=function(){a.state.favBooks.length>2?a.setState({postButton:!0}):a.setState({postButton:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldProps,o=t.getFieldError,l=this.state,c=l.user,s=l.error,i=l.secondScreen,u=l.isRegistered,m=l.favBooks,p=l.postButton,f=this.state.registerBooks.map(function(t){var a=!!m.includes(t);return r.a.createElement(Y,{book:t,key:t.id,bookClicked:e.handleCoverChange,isActive:a})});return u?r.a.createElement(d.a,{to:"/login"}):r.a.createElement("div",{className:"reg-container"},!this.state.secondScreen&&r.a.createElement("form",{onSubmit:this.submitFirstForm,className:"reg-form"},r.a.createElement("div",{className:"form-item"},r.a.createElement(H.a,{type:"user"}),r.a.createElement("label",null,"Name"),r.a.createElement(G,Object.assign({value:c.name,type:"text",allowClear:!0},a("name",{validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:I}]}),{errors:o("name")}))),r.a.createElement("div",{className:"form-item"},r.a.createElement(H.a,{type:"mail"}),r.a.createElement("label",null,"Email"),r.a.createElement(G,Object.assign({value:c.mail,type:"email",allowClear:!0},a("email",{validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:J}]}),{errors:o("email")}))),r.a.createElement("div",{className:"form-item"},r.a.createElement(H.a,{type:"lock"}),r.a.createElement("label",null,"Password"),r.a.createElement(G,Object.assign({type:"password",allowClear:!0},a("password",{validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:q}]}),{errors:o("password")}))),r.a.createElement("p",{className:"error"},s),r.a.createElement("div",{className:"form-item"},r.a.createElement("div",{className:"form-item-submit"},r.a.createElement("button",{type:"submit",className:"my-button next-button"},"Next")))),!0===i&&r.a.createElement(n.Fragment,null,r.a.createElement("h4",{className:"choose-register-title"},"Choose 3 or more books that you like"),r.a.createElement("div",{className:"register-books-container"},f),r.a.createElement("div",{className:"form-item-submit"},!p&&r.a.createElement("button",{type:"submit",className:"my-button post-button disabled-button",onClick:this.submitRegister,disabled:!0},"Register"),p&&r.a.createElement("button",{type:"submit",className:"my-button post-button",onClick:this.submitRegister},"Register"))))}}]),t}(n.Component),W=R()(V),K=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(x,null),r.a.createElement("div",{className:"screen-wrapper"},r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",{className:"reg-title"},"Register"),r.a.createElement(W,null))))},X={getUser:function(e){return w.get("/users/".concat(e,"/profile")).then(function(e){return e.data})},getUsers:function(){return w.get("/users/").then(function(e){return e.data})},getSocialUsers:function(e){return w.get("/users/".concat(e,"/friends")).then(function(e){return e.data})},followUser:function(e){return w.post("/users/".concat(e,"/follow")).then(function(e){return e.data})},unfollowUser:function(e){return w.delete("/users/".concat(e,"/follow")).then(function(e){return e.data})}},Z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:"",isAuthenticated:!1},a.submitLogin=function(e){var t=a.props.form;e.preventDefault(),t.validateFields(function(e,t){e&&Object.keys(e).length>0||S.login(t).then(function(e){a.setState({isAuthenticated:!0},function(){X.getUser(e.id).then(function(e){return a.props.onUserChanged(e)}),a.props.onUserChanged(e)})},function(e){var t=e.response.data.message;a.setState({error:t})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldProps,a=e.getFieldError,n=this.state,o=n.error;return n.isAuthenticated?r.a.createElement(d.a,{to:"/home"}):r.a.createElement("div",{className:"reg-container"},r.a.createElement("form",{onSubmit:this.submitLogin,className:"reg-form"},r.a.createElement("div",{className:"form-item"},r.a.createElement(H.a,{type:"mail"}),r.a.createElement("label",null,"Email"),r.a.createElement(G,Object.assign({type:"email",allowClear:!0},t("email",{validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:J}]}),{errors:a("email")}))),r.a.createElement("div",{className:"form-item"},r.a.createElement(H.a,{type:"lock"}),r.a.createElement("label",null,"Password"),r.a.createElement(G,Object.assign({type:"password",allowClear:!0},t("password",{validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:q}]}),{errors:a("password")}))),r.a.createElement("p",{className:"error"},o),r.a.createElement("div",{className:"form-item"},r.a.createElement("div",{className:"form-item-submit"},r.a.createElement("button",{type:"submit",className:"my-button next-button"},"Log in")))))}}]),t}(n.Component),$=O(R()(Z)),Q=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(x,null),r.a.createElement("div",{className:"screen-wrapper"},r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",{className:"reg-title"},"Login"),r.a.createElement($,null))))};b.b.add(E.d),b.b.add(E.c),b.b.add(E.h),b.b.add(E.g);var _=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"usernavbar"},r.a.createElement("ul",{className:"usernavbar-container"},r.a.createElement("li",null,r.a.createElement(p.c,{className:"nav-link",activeClassName:"active",to:"/home"},r.a.createElement("div",{className:"usernavbar-item"},r.a.createElement(v.a,{icon:"home"})))),r.a.createElement("li",null,r.a.createElement(p.c,{className:"nav-link",activeClassName:"active",to:"/explore"},r.a.createElement("div",{className:"usernavbar-item"},r.a.createElement(v.a,{icon:"compass"})))),r.a.createElement("li",null,r.a.createElement(p.c,{className:"nav-link",activeClassName:"active",to:"/friends"},r.a.createElement("div",{className:"usernavbar-item"},r.a.createElement(v.a,{icon:"users"})))),r.a.createElement("li",null,r.a.createElement(p.c,{className:"nav-link",activeClassName:"active",to:"/profile"},r.a.createElement("div",{className:"usernavbar-item"},r.a.createElement(v.a,{icon:"user-circle"}))))))}}]),t}(n.Component),ee=a(310),te=a.n(ee),ae=a(587),ne=a(167),re=function(e){var t=e.onSearch,a=e.uploadCover;return r.a.createElement("div",{className:"field explore-search-bar"},r.a.createElement(T.a,{className:"input",type:"text",placeholder:"Search",allowClear:!0,onChange:function(e){return t(e.target.value)}}),r.a.createElement(ae.a,{className:"upload-cover-book",name:"cover",listType:"picture",beforeUpload:function(e){return a(e),!1}},r.a.createElement(ne.a,{htmlType:"button"},r.a.createElement(H.a,{type:"camera",style:{fontSize:"20px"}}))))},oe=function(){return r.a.createElement("div",{className:"preloader-wrapper medium active"},r.a.createElement("div",{className:"spinner-layer  spinner-yellow-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))),r.a.createElement("div",{className:"spinner-layer  spinner-yellow-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))),r.a.createElement("div",{className:"spinner-layer  spinner-yellow-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))),r.a.createElement("div",{className:"spinner-layer  spinner-yellow-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))},le=function(e){var t=e.book,a=t.imageLink,n=t.title,o=t.id,l=function(){if(e.book.authors){var t=[e.book.authors];return 1===t.length&&(t=t[0]),t.length>1&&(t=t.join(" & ")),t}return""}();return r.a.createElement("li",{className:"collection-item avatar"},r.a.createElement(p.b,{to:"/explore/".concat(o)},r.a.createElement("img",{src:a,alt:n,className:"circle"}),r.a.createElement("span",{className:"title"},r.a.createElement("strong",null,n)),r.a.createElement("p",{className:"authors-item"},l)),r.a.createElement("a",{href:"#!",className:"secondary-content"},r.a.createElement("i",{className:"material-icons"})))},ce=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=[];return e=""!==this.props.books?this.props.books.map(function(e){return r.a.createElement(le,{book:e,key:e.id})}):r.a.createElement("li",{className:"collection-item avatar"},r.a.createElement("span",{className:"title"},r.a.createElement("strong",null,"Not books found"))),r.a.createElement("div",{className:"booklist-container"},r.a.createElement("ul",{className:"collection"},e))}}]),t}(n.Component),se=a(59),ie=a.n(se),ue={infinite:!0,speed:500,slidesToShow:10,swipeToSlide:!0,variableWidth:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:5,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:1}}]},me=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.book,t=e.imageLink,a=e.title,n=e.id,o=this.props.badge;return r.a.createElement("li",{className:"book-card card"},r.a.createElement(p.b,{to:"/explore/".concat(n)},r.a.createElement("figure",{className:"card-image"},r.a.createElement("img",{className:"book-cover",src:t,alt:a}),r.a.createElement("span",{className:"badge book-badge"},o))))}}]),t}(n.Component);b.b.add(E.f);var de=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],loading:!1},a.componentDidMount=function(){a.setState({loading:!0},function(){z.getBestRatedBooks(5).then(function(e){a.setState({books:e,loading:!1})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.books.sort(function(){return.5-Math.random()}).map(function(e){return r.a.createElement(me,{key:e.id,book:e,badge:r.a.createElement(v.a,{icon:"star"})})}),t=this.state.loading;return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h4",{className:"category-title"},"Best rated books"),t&&r.a.createElement(oe,null),!t&&r.a.createElement("ul",{className:"book-container"},r.a.createElement(ie.a,ue,e)))}}]),t}(n.Component),pe=O(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],loading:!1},a.componentDidMount=function(){var e=a.props.user.favGenres.join(",");a.setState({loading:!0},function(){z.getRelatedBooks(e).then(function(e){a.setState({books:e,loading:!1})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.books.sort(function(){return.5-Math.random()}).map(function(e){var t=e.genres[0];return t.includes(" ")&&(t=t.substr(0,t.indexOf(" "))),r.a.createElement(me,{key:e.id,book:e,badge:t})}),t=this.state.loading;return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h4",{className:"category-title"},"Books that you will like"),t&&r.a.createElement(oe,null),!t&&r.a.createElement("ul",{className:"book-container"},r.a.createElement(ie.a,ue,e)))}}]),t}(n.Component)),fe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],loading:!1},a.componentDidMount=function(){a.setState({loading:!0},function(){z.getLatestBooks(2019).then(function(e){a.setState({books:e,loading:!1})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.books.sort(function(){return.5-Math.random()}).map(function(e){var t="".concat(new Date(e.publishedDate).getMonth()+1,"/").concat(new Date(e.publishedDate).getFullYear());return r.a.createElement(me,{key:e.id,book:e,badge:t})}),t=this.state.loading;return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h4",{className:"category-title"},"Latest books"),t&&r.a.createElement(oe,null),!t&&r.a.createElement("ul",{className:"book-container"},r.a.createElement(ie.a,ue,e)))}}]),t}(n.Component),he=a(588),ge=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],genre:"",loading:!1},a.handleSelectChange=function(e){var t=e;a.handleGenreBooks(t)},a.handleGenreBooks=function(e){a.setState({loading:!0},function(){z.getRelatedBooks(e).then(function(e){a.setState({books:e,loading:!1})})})},a.componentDidMount=function(){a.handleGenreBooks("Fiction")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.books.sort(function(){return.5-Math.random()}).map(function(e){var t=e.genres[0];return t.includes(" ")&&(t=t.substr(0,t.indexOf(" "))),r.a.createElement(me,{key:e.id,book:e,badge:t})}),t=this.state.loading;return r.a.createElement("div",{className:"category-screen"},r.a.createElement("div",{className:"genre-input"},r.a.createElement("h4",{className:"category-title"},"Books by genre"),r.a.createElement(he.a,{defaultValue:"Fiction",onChange:this.handleSelectChange},r.a.createElement(he.a.Option,{value:"Biography & Autobiography"},"Biography & Autobiography"),r.a.createElement(he.a.Option,{value:"Business & Economics"},"Business & Economics"),r.a.createElement(he.a.Option,{value:"Fiction"},"Fiction"),r.a.createElement(he.a.Option,{value:"Health & Fitness"},"Health & Fitness"),r.a.createElement(he.a.Option,{value:"Juvenile Nonfiction"},"Juvenile Nonfiction"),r.a.createElement(he.a.Option,{value:"History"},"History"),r.a.createElement(he.a.Option,{value:"Literary Collections"},"Literary Collections"),r.a.createElement(he.a.Option,{value:"Performing Arts"},"Performing Arts"),r.a.createElement(he.a.Option,{value:"Political Science"},"Political Science"),r.a.createElement(he.a.Option,{value:"Self-Help"},"Self-Help"),r.a.createElement(he.a.Option,{value:"Social Science"},"Social Science"))),t&&r.a.createElement(oe,null),!t&&r.a.createElement("ul",{className:"book-container"},r.a.createElement(ie.a,ue,e)))}}]),t}(n.Component),be=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],search:"",coverBook:!1,loading:!1},a.onSearch=te()(function(e){a.setState({search:e}),e.length>3&&z.getSearchedBook(e).then(function(e){a.setState({books:e})})},1e3),a.uploadCover=function(e){a.setState({loading:!0}),z.postCoverBook(e).then(function(e){a.setState({books:e,coverBook:!0,loading:!1})})},a.closeCoverSearch=function(){a.setState({search:"",coverBook:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.books,a=e.search,o=e.coverBook,l=e.loading;return r.a.createElement("div",{className:"screen-container"},r.a.createElement(re,{onSearch:this.onSearch.bind(this),uploadCover:this.uploadCover.bind(this)}),(a||o)&&r.a.createElement(ce,{books:t}),o&&r.a.createElement(H.a,{type:"close-circle",className:"close-cover-search",onClick:this.closeCoverSearch}),l&&r.a.createElement(oe,null),!a&&!o&&!l&&r.a.createElement(n.Fragment,null,r.a.createElement(pe,null),r.a.createElement(de,null),r.a.createElement(fe,null),r.a.createElement(ge,null)))}}]),t}(n.Component),ve={createGoal:function(e){return w.post("/users/creategoal",e).then(function(e){return e.data})},getGoals:function(){return w.get("/users/goals").then(function(e){return e.data})},getLastGoals:function(e){return w.post("/users/goals/".concat(e)).then(function(e){return e.data})}},Ee=O(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={pagesDay:0},a.handlePagesChange=function(e){var t=e.target.value;a.setState({pagesDay:t})},a.handlePagesSubmit=function(e){e.preventDefault();var t={pagesDay:a.state.pagesDay};t.pagesDay>0&&(ve.createGoal(t).then(),a.props.user.pagesGoal<=a.state.pagesDay?a.props.congratsBox(!0):a.props.congratsBox(!1))},a.valuePages=function(){ve.getLastGoals(1).then(function(e){if(0!==e.length){var t=new Date,n=new Date(e[0].updatedAt),r=t.getDate()===n.getDate(),o=t.getMonth()===n.getMonth(),l=t.getFullYear()===n.getFullYear();r&&o&&l&&a.setState({pagesDay:e[0].pagesDay})}})},a.componentDidMount=function(){a.valuePages()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.pagesDay;return r.a.createElement("div",{className:"pages-read-container"},r.a.createElement("h4",{className:"how-many-pages-title"},"How many pages did you read today?"),r.a.createElement("div",{className:"pages-read-today"},r.a.createElement("div",{className:"input-field pages-input"},r.a.createElement("input",{type:"number",name:"pages",onChange:this.handlePagesChange,value:e})),r.a.createElement("button",{className:"my-button confirm-pages",onClick:this.handlePagesSubmit},"pages read today")))}}]),t}(n.Component)),ke=a(106),ye=a(333),Ne=O(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={period:"month",pagesRead:0,data:[]},a.handlePeriodChange=function(e){var t=e;a.handleDataGraphic(t)},a.handleDataGraphic=function(e){var t=[],n=function(e,a){t.unshift({x:e,y:a})};switch(e){case"year":ve.getLastGoals(365).then(function(r){if(r){var o=!0,l=!1,c=void 0;try{for(var s,i=r[Symbol.iterator]();!(o=(s=i.next()).done);o=!0){var u=s.value,m=new Date(u.updatedAt);n(ke.DateTime.fromJSDate(m).day+ke.DateTime.fromJSDate(m).monthShort,u.pagesDay)}}catch(d){l=!0,c=d}finally{try{o||null==i.return||i.return()}finally{if(l)throw c}}}a.setDataGraphic(t,e)});break;case"month":ve.getLastGoals(30).then(function(r){if(r){var o=!0,l=!1,c=void 0;try{for(var s,i=r[Symbol.iterator]();!(o=(s=i.next()).done);o=!0){var u=s.value,m=new Date(u.updatedAt);n(ke.DateTime.fromJSDate(m).day+ke.DateTime.fromJSDate(m).monthShort,u.pagesDay)}}catch(d){l=!0,c=d}finally{try{o||null==i.return||i.return()}finally{if(l)throw c}}}a.setDataGraphic(t,e)});break;case"week":default:ve.getLastGoals(7).then(function(r){if(r){var o=!0,l=!1,c=void 0;try{for(var s,i=r[Symbol.iterator]();!(o=(s=i.next()).done);o=!0){var u=s.value,m=new Date(u.updatedAt);n(ke.DateTime.fromJSDate(m).weekdayShort+ke.DateTime.fromJSDate(m).day,u.pagesDay)}}catch(d){l=!0,c=d}finally{try{o||null==i.return||i.return()}finally{if(l)throw c}}}a.setDataGraphic(t,e)})}},a.setDataGraphic=function(e,t){var n=e.reduce(function(e,t){return e+t.y},0);a.setState({data:e,period:t,pagesRead:n})},a.componentDidMount=function(){a.handleDataGraphic("month")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.pagesRead,n=[{id:"Pages",data:Object(F.a)(t)}],o=r.a.createElement(ye.a,{data:n,margin:{top:30,right:20,bottom:30,left:20},curve:"natural",axisTop:null,axisRight:null,axisBottom:null,axisLeft:null,enableGridY:!1,enableGridX:!1,lineWidth:7,dotSize:0,colors:"#fafafa",dotColor:"inherit:darker(1)",dotLabelYOffset:-15,isInteractive:!1,enableStackTooltip:!1,animate:!0,motionStiffness:100,motionDamping:5});return r.a.createElement("div",{className:"category-screen"},r.a.createElement("div",{className:"pages-read-wrapper"},r.a.createElement("h2",{className:"pages-read-count"},a),r.a.createElement("h4",{className:"pages-read-in"},"pages read in"),r.a.createElement(he.a,{className:"pages-period-select",defaultValue:"month",onChange:this.handlePeriodChange},r.a.createElement(he.a.Option,{value:"week"},"the last week"),r.a.createElement(he.a.Option,{value:"month"},"the last month"),r.a.createElement(he.a.Option,{value:"year"},"the last year"))),r.a.createElement("div",{className:"chart-graphic"},o))}}]),t}(n.Component)),Oe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={congratsBox:!1,congratsText:""},a.handleCongratsText=function(e){e?a.setState({congratsBox:!0,congratsText:"Congrats!! You rocked your goal!"}):a.setState({congratsBox:!0,congratsText:"Good!! It's better than nothing. Keep improving to reach your daily goal."})},a.closeCongratsBox=function(){a.setState({congratsBox:!1,congratsText:""})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.congratsText;return r.a.createElement("div",{className:"screen-container"},e&&r.a.createElement("div",{className:"congrats-box"},r.a.createElement("div",{className:"congrats-text"},r.a.createElement("p",null,e),r.a.createElement("button",{className:"my-button congrats-button",onClick:this.closeCongratsBox},"Close"))),r.a.createElement(Ne,null),r.a.createElement(Ee,{congratsBox:this.handleCongratsText}))}}]),t}(n.Component),je=a(222),we=a.n(je),Se=a(331),Ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user,book:a.props.book},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.user,t=e.id,a=e.name,n=e.avatarURL,o=this.state.book;return r.a.createElement("li",{className:"collection-item avatar"},r.a.createElement(p.b,{to:"/friends/".concat(t)},r.a.createElement("img",{src:n,alt:a,className:"circle"}),r.a.createElement("span",{className:"title"},r.a.createElement("strong",null,a)),o?r.a.createElement("p",{className:"currently-reading"},"Currently reading:"," ",r.a.createElement("span",{className:"currently-reading-text"},r.a.createElement("span",{className:"currently-reading-title"}," ",o.title)," ")):r.a.createElement("p",{className:"currently-reading"},"Not currently reading")),r.a.createElement("a",{href:"#!",className:"secondary-content"},r.a.createElement("i",{className:"material-icons"})))}}]),t}(n.Component),Be=O(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],loading:!0},a.componentDidMount=function(){X.getUsers().then(function(e){e=(e=e.filter(function(e){return e.id!==a.props.user.id})).map(function(){var e=Object(Se.a)(we.a.mark(function e(t){var a;return we.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.userbooks.find(function(e){return"reading"===e.state}))){e.next=5;break}return e.abrupt("return",z.getOneBook(a.book).then(function(e){return t.readingBook={id:e.id,title:e.title,authors:e.authors,image:e.imageLink},t}));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Promise.all(e).then(function(e){return a.setState({users:e,loading:!1})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.loading;return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h2",{className:"category-title"},"Discover what other people are reading"),r.a.createElement("div",{className:"friendslist-container"},r.a.createElement("ul",{className:"collection"},e?r.a.createElement(oe,null):this.state.users.map(function(e){return e.readingBook?r.a.createElement(Ce,{user:e,book:e.readingBook,key:e.id}):r.a.createElement(Ce,{user:e,key:e.id})}))))}}]),t}(n.Component)),De=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"screen-container"},r.a.createElement(Be,null))}}]),t}(n.Component),xe=O(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],loading:!0},a.componentDidMount=function(){},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){this.state.loading;return r.a.createElement("div",{className:"category-screen"})}}]),t}(n.Component)),Fe=a(224),Ae=a(589),Pe={getProfileBooks:function(e){return w.get("/users/books",{params:{state:e}}).then(function(e){return e.data})},getStateBook:function(e){return w.get("/users/books/".concat(e)).then(function(e){return e.data})},createStateBook:function(e,t){return w.post("/users/books/".concat(e,"?state=").concat(t)).then(function(e){return e.data})}},Re=Ae.a.Panel,Te=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={book:{},relatedBooks:[],state:""},a.handleStateButton=function(e){var t=e.target.value;a.setState({state:t}),Pe.createStateBook(a.state.book.id,t),Pe.getStateBook(a.state.book.id).then(function(e){a.setState({state:e})})},a.formatDate=function(e){return new Date(e).toLocaleDateString()},a.handleAuthors=function(){if(a.state.book.authors){var e=[a.state.book.authors];return 1===e.length&&(e=e[0]),e.length>1&&(e=e.join(" & ")),e}return""},a.componentDidMount=function(){var e=a.props.match.params.bookId;Promise.all([z.getOneBook(e),Pe.getStateBook(e)]).then(function(e){var t=Object(Fe.a)(e,2),n=t[0],r=t[1],o=n.genres[0];z.getRelatedBooks(o).then(function(e){a.setState({book:n,state:r,relatedBooks:e})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.match.params.bookId;a!==e.match.params.bookId&&Promise.all([z.getOneBook(a),Pe.getStateBook(a)]).then(function(e){var a=Object(Fe.a)(e,2),n=a[0],r=a[1],o=n.genres[0];z.getRelatedBooks(o).then(function(e){t.setState({book:n,state:r,relatedBooks:e},function(){return document.querySelector("body").scrollTop=0})})})}},{key:"render",value:function(){var e=this.state,t=e.book,a=e.state,n=this.handleAuthors(),o=this.formatDate(this.state.book.publishedDate),l=this.state.relatedBooks.filter(function(e){return e.isbn!==t.isbn}).sort(function(){return.5-Math.random()}).map(function(e){var t=e.genres[0];return t.includes(" ")&&(t=t.substr(0,t.indexOf(" "))),r.a.createElement(me,{key:e.id,book:e,badge:t})});return r.a.createElement("div",{className:"screen-container"},r.a.createElement("div",{className:"book-detail-container"},r.a.createElement("div",{className:"book-detail-maininfo"},r.a.createElement("figure",{className:"book-detail-cover"},r.a.createElement("img",{src:t.imageLink,alt:t.title})),r.a.createElement("div",{className:"book-detail-title"},r.a.createElement("h2",{className:"detail-title"},t.title),r.a.createElement("h4",{className:"detail-author"},n))),r.a.createElement("div",{className:"book-detail-buttons collection"},r.a.createElement("button",{className:"pending"===a?"my-button active-state":"my-button pending-button",value:"pending",onClick:this.handleStateButton},"pending"),r.a.createElement("button",{className:"reading"===a?"my-button active-state":"my-button reading-button",value:"reading",onClick:this.handleStateButton},"reading"),r.a.createElement("button",{className:"read"===a?"my-button active-state":"my-button reading-button",value:"read",onClick:this.handleStateButton},"read")),r.a.createElement("div",{className:"book-detail-summary"},r.a.createElement(Ae.a,{bordered:!1,defaultActiveKey:[]},t.googleRating&&r.a.createElement(Re,{header:"Rating",key:"1"},t.googleRating),t.pageCount&&r.a.createElement(Re,{header:"Page Count",key:"2"},t.pageCount," pages"),o&&r.a.createElement(Re,{header:"Published Date",key:"3"},"Date: ",o),t.description&&r.a.createElement(Re,{header:"Description",key:"4"},t.description)))),r.a.createElement("div",{className:"category-screen"},r.a.createElement("h4",{className:"category-title"},"Related books"),r.a.createElement("ul",{className:"book-container"},r.a.createElement(ie.a,ue,l))))}}]),t}(n.Component),Ue=a(138),Ge=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleGenres=function(){if(a.props.friend){var e=[a.props.friend.favGenres];return 1===e.length&&(e=e[0]),e.length>1&&(e=e.slice(0,2).join(" & ")),e}return""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.friend,t=e.name,a=e.avatarURL,n=e.followers,o=this.props.userId,l=n.some(function(e){return e.follower===o}),c=this.handleGenres();return r.a.createElement("div",{className:"category-screen"},r.a.createElement("div",{className:"card horizontal profile-card"},r.a.createElement("div",{className:"card-image profile-avatar"},r.a.createElement("img",{src:a||"https://profile.actionsprout.com/default.jpeg",alt:"profile-pic",className:"profile-avatar-img"})),r.a.createElement("div",{className:"card-stacked"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h4",null,t),r.a.createElement("p",null,"Favorite genres: ",r.a.createElement("strong",null,c))),r.a.createElement("div",{className:"card-action profile-link"},!l&&r.a.createElement("button",{className:"my-button follow-button",onClick:this.props.handleFollow},"Follow the reader"),l&&r.a.createElement("button",{className:"my-button unfollow-button",onClick:this.props.handleUnfollow},"Unfollow the reader")))))}}]),t}(n.Component),Le=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.book,a=e.friendName,n=a.substr(0,a.indexOf(" "));return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h2",{className:"category-title"},n," is currently reading"),r.a.createElement("div",{className:"booklist-container"},r.a.createElement("ul",{className:"collection"},r.a.createElement(le,{book:t,key:t.id}))))}}]),t}(n.Component),Me=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={friend:{},books:[]},a.componentDidMount=function(){var e=a.props.friend.favGenres.join(",");z.getRelatedBooks(e).then(function(e){a.setState({books:e})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.books.sort(function(){return.5-Math.random()}).map(function(e){var t=e.genres[0];return t.includes(" ")&&(t=t.substr(0,t.indexOf(" "))),r.a.createElement(me,{key:e.id,book:e,badge:t})}),t=this.props.friend.name,a=t.substr(0,t.indexOf(" "));return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h4",{className:"category-title"},"Books related to what ",a," likes"),r.a.createElement("ul",{className:"book-container"},r.a.createElement(ie.a,ue,e)))}}]),t}(n.Component),Ie=O(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={friend:{},readingBook:{},followButton:!1,loading:!0},a.handleFollow=function(){var e=a.state.friend;X.followUser(a.state.friend.id).then(function(t){t&&a.setState({friend:Object(Ue.a)({},e,{followers:[].concat(Object(F.a)(e.followers),[t])})})})},a.handleUnfollow=function(){var e=a.state.friend,t=a.props.user;X.unfollowUser(a.state.friend.id).then(function(){a.setState({friend:Object(Ue.a)({},e,{followers:e.followers.filter(function(e){return e.follower!==t.id})})})})},a.componentDidMount=function(){var e=a.props.match.params.userId;X.getUser(e).then(function(e){var t=e.userbooks.find(function(e){return"reading"===e.state});t?z.getOneBook(t.book).then(function(t){a.setState({friend:e,readingBook:t,loading:!1})}):a.setState({friend:e,loading:!1})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.friend,a=e.followButton,o=e.loading,l=e.readingBook,c=this.props.user.id;return r.a.createElement("div",{className:"screen-container"},o?r.a.createElement(oe,null):r.a.createElement(n.Fragment,null,r.a.createElement(Ge,{friend:t,followButton:a,handleFollow:this.handleFollow,handleUnfollow:this.handleUnfollow,userId:c}),l.title&&r.a.createElement(Le,{book:l,friendName:t.name})),t.name&&r.a.createElement(Me,{friend:t}))}}]),t}(n.Component)),Je=O(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={followed:0,following:0},a.componentDidMount=function(){X.getSocialUsers(a.props.user.id).then(function(e){a.setState({followed:e.followers.length,following:e.following.length})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.followed,a=e.following;return r.a.createElement("ul",{className:"collection follow-container"},r.a.createElement("div",{className:"follow-item"},r.a.createElement("div",{className:"follow-content"},r.a.createElement("p",null,"Followed by"),r.a.createElement("span",{className:"follow-title"},t),r.a.createElement("p",null,"readers"))),r.a.createElement("div",{className:"follow-item"},r.a.createElement("div",{className:"follow-content"},r.a.createElement("p",null,"Following"),r.a.createElement("span",{className:"follow-title"},a),r.a.createElement("p",null,"readers"))))}}]),t}(n.Component));b.b.add(E.b);var qe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user,error:"",editBox:!1,avatar:null},a.handleGenres=function(){if(a.props.user){var e=[a.props.user.favGenres];return 1===e.length&&(e=e[0]),e.length>1&&(e=e.slice(0,2).join(" & ")),e}return""},a.editProfile=function(){a.setState({editBox:!0})},a.cancelEdit=function(){a.setState({user:a.props.user,error:"",editBox:!1,avatar:null})},a.submitProfile=function(e){var t=a.state.avatar,n=a.props.form;e.preventDefault(),n.validateFields(function(e,n){e&&Object.keys(e).length>0||(t&&(n.avatar=t),S.updateProfile(n).then(function(e){a.setState({editBox:!1,user:Object(Ue.a)({},a.state.user,e)},function(){a.props.onUserChanged(e)})},function(e){var t=e.response.data.message;a.setState({error:t})}))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.user,o=t.editBox,l=t.error,c=t.avatar,s=this.props.form,i=s.getFieldProps,u=s.getFieldError,m=this.handleGenres();return r.a.createElement(n.Fragment,null,!o&&r.a.createElement("div",{className:"category-screen"},r.a.createElement("div",{className:"card horizontal profile-card"},r.a.createElement("div",{className:"card-image profile-avatar"},r.a.createElement("img",{src:a.avatarURL?a.avatarURL:"https://profile.actionsprout.com/default.jpeg",alt:"profile-pic",className:"profile-avatar-img"})),r.a.createElement("div",{className:"card-stacked"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h4",null,a.name),r.a.createElement("p",null,"Daily goal: ",r.a.createElement("strong",null,a.pagesGoal," pages")),r.a.createElement("p",null,"Genres: ",r.a.createElement("strong",null,m))),r.a.createElement(Je,null),r.a.createElement("div",{className:"profile-link"},r.a.createElement(v.a,{icon:"cog",onClick:this.editProfile}))))),o&&r.a.createElement("div",{className:"category-screen"},r.a.createElement("div",{className:"card-horizontal profile-card profile-card-edit"},r.a.createElement("div",{className:"card-image profile-avatar-edit"},r.a.createElement("div",{className:"profile-form-image"},r.a.createElement("img",{src:c?URL.createObjectURL(c):a.avatarURL?a.avatarURL:"https://profile.actionsprout.com/default.jpeg",alt:"profile-pic",className:"profile-avatar-img-edit"}),r.a.createElement(ae.a,{className:"upload-pic-button",name:"logo",listType:"picture",beforeUpload:function(t){return e.setState({avatar:t}),!1}},r.a.createElement(ne.a,{htmlType:"button"},r.a.createElement(H.a,{type:"upload"})," Change avatar")))),r.a.createElement("div",{className:"card-stacked profile-info"},r.a.createElement("div",{className:"card-content"},r.a.createElement("form",{id:"profile-form",onSubmit:this.submitProfile},r.a.createElement("div",{className:"profile-form-group"},r.a.createElement("label",null,"Name"),r.a.createElement(G,Object.assign({type:"text",allowClear:!0},i("name",{initialValue:a.name,validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:I}]}),{errors:u("name")}))),r.a.createElement("div",{className:"profile-form-group"},r.a.createElement("label",null,"Email"),r.a.createElement(G,Object.assign({type:"email",allowClear:!0},i("email",{initialValue:a.email,validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:J}]}),{errors:u("email")}))),r.a.createElement("div",{className:"profile-form-group"},r.a.createElement("label",null,"Pages goal"),r.a.createElement(G,Object.assign({type:"number",allowClear:!0},i("pagesGoal",{initialValue:a.pagesGoal,validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0}]})))),r.a.createElement("p",{className:"error"},l),r.a.createElement("div",{className:"profile-form-group card-action"},r.a.createElement("div",{className:"profile-group-submit"},r.a.createElement("button",{onClick:this.cancelEdit,className:"my-button cancel-button"},"Cancel"),r.a.createElement("button",{type:"submit",className:"my-button update-button"},"Update")))))))))}}]),t}(n.Component),He=O(R()(qe)),ze=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[]},a.componentDidMount=function(){Pe.getProfileBooks(a.props.state).then(function(e){a.setState({books:e})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.books.map(function(e){return r.a.createElement(le,{book:e,key:e.id})});return r.a.createElement("div",{className:"booklist-container"},r.a.createElement("ul",{className:"collection"},e))}}]),t}(n.Component),Ye=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h2",{className:"category-title"},"Books that you have pending"),r.a.createElement(ze,{state:"pending"}))}}]),t}(n.Component),Ve=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h2",{className:"category-title"},"Books that you have read"),r.a.createElement(ze,{state:"read"}))}}]),t}(n.Component),We=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h2",{className:"category-title"},"Books that you are reading"),r.a.createElement(ze,{state:"reading"}))}}]),t}(n.Component),Ke=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"screen-container"},r.a.createElement(He,null),r.a.createElement(We,null),r.a.createElement(Ye,null),r.a.createElement(Ve,null))}}]),t}(n.Component),Xe=a(332),Ze=function(e){var t=e.component,a=Object(Xe.a)(e,["component"]);return r.a.createElement(y.Consumer,null,function(e){var n=e.isAuthenticated;return e.user,r.a.createElement(d.b,Object.assign({},a,{render:function(e){return n()?r.a.createElement(d.a,{to:"/home"}):r.a.createElement(t,e)}}))})},$e=O(function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.isAuthenticated();return r.a.createElement("div",{className:"App"},!e&&r.a.createElement(d.d,null,r.a.createElement(Ze,{path:"/register",component:K}),r.a.createElement(Ze,{path:"/login",component:Q}),r.a.createElement(d.b,{exact:!0,path:"/",component:g}),r.a.createElement(d.a,{to:"/"})),e&&r.a.createElement(n.Fragment,null,r.a.createElement(x,null),r.a.createElement("div",{className:"screen-wrapper"},r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/home",component:Oe}),r.a.createElement(d.b,{exact:!0,path:"/explore",component:be}),r.a.createElement(d.b,{exact:!0,path:"/friends",component:De}),r.a.createElement(d.b,{exact:!0,path:"/profile",component:Ke}),r.a.createElement(d.b,{exact:!0,path:"/friends/list/:followstate",component:xe}),r.a.createElement(d.b,{path:"/explore/:bookId",component:Te}),r.a.createElement(d.b,{path:"/friends/:userId",component:Ie}),r.a.createElement(d.a,{to:"/home"}))),r.a.createElement(_,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(p.a,{basename:"/storyland-app"},r.a.createElement(N,null,r.a.createElement($e,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[335,1,2]]]);
//# sourceMappingURL=main.089ca9cf.chunk.js.map