(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{225:function(e,t,a){e.exports=a.p+"static/media/storyland-main-dark.e6a93caf.png"},318:function(e,t,a){e.exports=a.p+"static/media/storyland-white.7075a412.png"},336:function(e,t,a){e.exports=a(588)},344:function(e,t,a){},588:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(20),l=a.n(o),c=(a(341),a(342),a(343),a(344),a(7)),s=a(8),i=a(10),u=a(9),m=a(11),d=a(102),p=a(26),h=a(171),f=a(318),g=a.n(f),b=a(43),v=a.n(b),E="current-user",y=r.a.createContext(),k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:JSON.parse(localStorage.getItem(E)||"{}")},a.handleUserChange=function(e){a.setState({user:e}),e&&e.email?localStorage.setItem(E,JSON.stringify(e)):localStorage.removeItem(E)},a.isAuthenticated=function(){return a.state.user&&a.state.user.email},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(y.Provider,{value:{user:this.state.user,onUserChanged:this.handleUserChange,isAuthenticated:this.isAuthenticated}},this.props.children)}}]),t}(n.Component),N=function(e){return function(t){return r.a.createElement(y.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,a))})}},O={infinite:!0,speed:500,slidesToShow:10,swipeToSlide:!0,variableWidth:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:5,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:1}}]},j=a(319),w=a.n(j).a.create({baseURL:"https://storyland-api.herokuapp.com",withCredentials:!0}),B={getRegisterBooks:function(){return w.get("/books/register").then(function(e){return e.data})},getAllBooks:function(){return w.get("/books").then(function(e){return e.data})},getRelatedBooks:function(e){return e.includes("&")&&(e=e.replace("&","@")),w.get("/books?genres=".concat(e)).then(function(e){return e.data})},getBestRatedBooks:function(e){return w.get("/books?rating=".concat(e)).then(function(e){return e.data})},getLatestBooks:function(e){return w.get("/books?year=".concat(e)).then(function(e){return e.data})},getSearchedBook:function(e){return w.post("/books/".concat(e)).then(function(e){return e.data})},getOneBook:function(e){return w.get("/books/".concat(e)).then(function(e){return e.data})},postCoverBook:function(e){var t=new FormData;return t.append("cover",e),w.post("/books/scancover",t).then(function(e){return Promise.resolve(e.data)})}},S=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showBadge:!1},a.showImgBadge=function(){a.setState({showBadge:!0})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.book,t=e.imageLink,a=e.title,n=e.id,o=this.props.badge,l=this.state.showBadge;return r.a.createElement("li",{className:"book-card card"},r.a.createElement(p.b,{to:"/explore/".concat(n)},r.a.createElement("figure",{className:"card-image"},r.a.createElement("img",{onLoad:this.showImgBadge,className:"book-cover",src:t,alt:a}),l&&r.a.createElement("span",{className:"badge book-badge"},o))))}}]),t}(n.Component),C=function(){return r.a.createElement("div",{className:"preloader-wrapper medium active"},r.a.createElement("div",{className:"spinner-layer  spinner-yellow-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))),r.a.createElement("div",{className:"spinner-layer  spinner-yellow-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))),r.a.createElement("div",{className:"spinner-layer  spinner-yellow-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))),r.a.createElement("div",{className:"spinner-layer  spinner-yellow-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))},x=N(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],loading:!1},a.componentDidMount=function(){a.setState({loading:!0},function(){B.getLatestBooks(2019).then(function(e){a.setState({books:e,loading:!1})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.isAuthenticated(),t=this.state.books.sort(function(){return.5-Math.random()}).map(function(e){var t="".concat(new Date(e.publishedDate).getMonth()+1,"/").concat(new Date(e.publishedDate).getFullYear());return r.a.createElement(S,{key:e.id,book:e,badge:t})}),a=this.state.loading;return r.a.createElement("div",{className:"category-screen"},e&&r.a.createElement("h4",{className:"category-title"},"Latest books"),a&&r.a.createElement(C,null),!a&&r.a.createElement("ul",{className:"book-container"},r.a.createElement(v.a,O,t)))}}]),t}(n.Component)),D=function(){return r.a.createElement("div",{className:"landing-web"},r.a.createElement("div",{className:"landing-first-section"},r.a.createElement("div",{className:"landing-logo"},r.a.createElement("img",{src:g.a,alt:"storyland-app"})),r.a.createElement("div",{className:"landing-screen first-landing"},r.a.createElement("div",{className:"landing-screen-text"},r.a.createElement("h2",{className:"landing-screen-title"},"Welcome to your private library"),r.a.createElement("p",null,"The app that helps you to read more, to keep your books organized and dicover new ones with your friends")))),r.a.createElement("div",{className:"landing-screen second-landing"},r.a.createElement(x,null),r.a.createElement("div",{className:"landing-screen-text catalog-text"},r.a.createElement("h2",{className:"landing-section-title"},"Full catalog of books"),r.a.createElement("h3",{className:"landing-section-subtitle"},"Where you can discover wonderful recommendations"))),r.a.createElement("hr",{className:"separation-line"}),r.a.createElement("div",{className:"landing-screen third-landing"},r.a.createElement("div",{className:"chart-landing"},r.a.createElement(h.a,{data:[{id:"Pages",data:[{x:"1",y:24},{x:"2",y:50},{x:"3",y:60},{x:"4",y:86},{x:"5",y:32},{x:"6",y:10},{x:"7",y:42},{x:"8",y:22},{x:"9",y:95},{x:"10",y:60},{x:"11",y:68},{x:"12",y:32},{x:"13",y:82},{x:"14",y:65},{x:"15",y:45},{x:"16",y:24},{x:"17",y:58},{x:"18",y:98}]}],curve:"natural",axisTop:null,axisRight:null,axisBottom:null,axisLeft:null,enableGridY:!1,enableGridX:!1,lineWidth:7,dotSize:0,colors:"#ffbb43",dotColor:"inherit:darker(1)",dotLabelYOffset:-15,isInteractive:!1,enableStackTooltip:!1,animate:!0,motionStiffness:100,motionDamping:5})),r.a.createElement("div",{className:"landing-screen-text chart-text"},r.a.createElement("h2",{className:"landing-section-title"},"Daily stats."),r.a.createElement("h3",{className:"landing-section-subtitle"},"The daily stats will help you to know how much you read periodically and they will encourage you to keep the habit"))),r.a.createElement("hr",{className:"separation-line"}),r.a.createElement("div",{className:"landing-screen buddies-screen"},r.a.createElement("div",{className:"landing-buddies"},r.a.createElement("img",{alt:"storyland-buddy",src:"https://joeschmoe.io/api/v1/jordan"}),r.a.createElement("img",{alt:"storyland-buddy",src:"https://joeschmoe.io/api/v1/jeane"})),r.a.createElement("div",{className:"landing-buddies"},r.a.createElement("img",{alt:"storyland-buddy",src:"https://joeschmoe.io/api/v1/jed"}),r.a.createElement("img",{alt:"storyland-buddy",src:"https://joeschmoe.io/api/v1/jenni"})),r.a.createElement("div",{className:"landing-screen-text"},r.a.createElement("h2",{className:"landing-section-title"},"Connect with your friends."),r.a.createElement("h3",{className:"landing-section-subtitle"},"Discover what they are reading, their tastes and what books they have pending"))),r.a.createElement("hr",{className:"separation-line"}),r.a.createElement("div",{className:"landind-screen fifth-landing"},r.a.createElement("div",{className:"landing-screen-text"},r.a.createElement("h2",{className:"landing-section-title"},"Start now."),r.a.createElement("h3",{className:"landing-section-subtitle"},"Sign up and become a lover of reading.")),r.a.createElement("div",{className:"landing-buttons"},r.a.createElement("div",null,r.a.createElement(p.b,{to:"/register"},r.a.createElement("button",{className:"my-button reg-button"},"Get Started"))),r.a.createElement("div",null,r.a.createElement(p.b,{to:"/login"},r.a.createElement("button",{className:"my-button log-button"},"Login"))))))},P=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(n.Component),F=Object(d.f)(P),A=a(39),R=a(51),L=a(36),G={login:function(e){return w.post("/login",e).then(function(e){return e.data})},register:function(e){return w.post("/register",e).then(function(e){return e.data})},logout:function(){return w.post("/logout").then(function(e){return e.data})},updateProfile:function(e){var t=new FormData;return Object.keys(e).forEach(function(a){"password"===a&&""===e.password||t.append(a,e[a])}),w.put("/users/profile",t).then(function(e){return Promise.resolve(e.data)})}},T=a(225),U=a.n(T);A.b.add(L.a),A.b.add(L.g);var M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleLogout=function(){G.logout().then(function(){var e=a.props.history;a.props.onUserChanged({}),e.push("/")})},a.handleBack=function(){a.props.history.goBack()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement(F,null,r.a.createElement("nav",{className:"basic-nav"},r.a.createElement("div",{className:"nav-wrapper basic-nav-list"},!e.email&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"nav-logo"},r.a.createElement(p.b,{className:"brand-logo",to:"/"},r.a.createElement("img",{className:"basic-nav-logo",src:U.a,alt:"storyland-app"}))),r.a.createElement("ul",{id:"nav-mobile",className:"right right-register-topbar"},r.a.createElement("li",{className:"basic-nav-item"},r.a.createElement(p.b,{className:"nav-link",to:"/register"},"Register")),r.a.createElement("li",{className:"basic-nav-item"},r.a.createElement(p.b,{className:"nav-link",to:"/login"},"Login")))),e.email&&r.a.createElement(n.Fragment,null,r.a.createElement("ul",{id:"nav-mobile",className:"left"},r.a.createElement("li",{className:"basic-nav-item basic-nav-item-back",onClick:this.handleBack},r.a.createElement(R.a,{icon:"arrow-left"}))),r.a.createElement(p.b,{className:"brand-logo center",to:"/home"},r.a.createElement("img",{className:"basic-nav-logo",src:U.a,alt:"storyland-app"})),r.a.createElement("ul",{id:"nav-mobile",className:"right right-register-topbar"},r.a.createElement("li",{className:"basic-nav-item basic-nav-item-logout",onClick:this.handleLogout},r.a.createElement(R.a,{icon:"sign-out-alt"})))))))}}]),t}(n.Component),I=N(Object(d.f)(M)),J=a(106),Y=a(321),q=a.n(Y),z=function(){return q()({validateMessages:{required:function(e){return"Required field"}}})},H=a(593),W=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.value,n=e.errors,o=e.onblur,l=e.className,c=e.type,s=e.allowClear,i=n&&n.length>0;return r.a.createElement("div",{className:l},r.a.createElement(H.a,Object.assign({onChange:t,value:a},c?{type:c}:null,s?{allowClear:s}:null,o?{onBlur:o}:null)),i&&n.map(function(e,t){return r.a.createElement("p",{className:"error",key:t},e)}))}}]),t}(n.Component);W.defaultProps={className:""};var V=W,K=/(.+)@(.+){2,}\.(.+){2,}/i,X=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d){6,}/,Z=function(e,t,a){return t&&t.length>=3?a():a(new Error("Name needs at least 3 chars"))},$=function(e,t,a){return(n=t)&&K.test(n)?a():a(new Error("Invalid mail"));var n},Q=function(e,t,a){return(n=t)&&X.test(n)?a():a(new Error("Password needs uppercase, lowercase and numbers"));var n},_=a(31),ee=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.book,n=t.isActive;return r.a.createElement("div",{className:"register-book-item",onClick:function(){return e.props.bookClicked(a)}},r.a.createElement("img",{className:n?"register-book-active":"",src:a.imageLink,alt:a.title}))}}]),t}(n.Component),te=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},registerBooks:[],favBooks:[],error:"",secondScreen:!1,isRegistered:!1,postButton:!1},a.submitFirstForm=function(e){var t=a.props.form;e.preventDefault(),t.validateFields(function(e,t){e&&Object.keys(e).length>0||a.setState({user:t,secondScreen:!0}),a.handleRegisterBooks()})},a.submitRegister=function(e){var t=a.state,n=t.user,r=t.favBooks;if(e.preventDefault(),r.length>2){var o=r.map(function(e){return e.genres[0]});o=(o=function(e){var t={};return e.forEach(function(e){t[e]||(t[e]=!0)}),Object.keys(t)}(o)).slice(0,3),n.favGenres=o,G.register(n).then(function(e){a.setState({isRegistered:!0})},function(e){var t=e.response.data.message;a.setState({error:t,secondScreen:!1})})}},a.handleRegisterBooks=function(){B.getRegisterBooks().then(function(e){a.setState({registerBooks:e})})},a.handleCoverChange=function(e){a.state.favBooks.includes(e)?a.setState({favBooks:Object(J.a)(a.state.favBooks).filter(function(t){return t!==e})},function(){a.handlePostButton()}):a.setState({favBooks:[].concat(Object(J.a)(a.state.favBooks),[e])},function(){a.handlePostButton()})},a.handlePostButton=function(){a.state.favBooks.length>2?a.setState({postButton:!0}):a.setState({postButton:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldProps,o=t.getFieldError,l=this.state,c=l.user,s=l.error,i=l.secondScreen,u=l.isRegistered,m=l.favBooks,p=l.postButton,h=this.state.registerBooks.map(function(t){var a=!!m.includes(t);return r.a.createElement(ee,{book:t,key:t.id,bookClicked:e.handleCoverChange,isActive:a})});return u?r.a.createElement(d.a,{to:"/login"}):r.a.createElement("div",{className:"reg-container"},!this.state.secondScreen&&r.a.createElement("form",{onSubmit:this.submitFirstForm,className:"reg-form"},r.a.createElement("div",{className:"form-item"},r.a.createElement(_.a,{type:"user"}),r.a.createElement("label",null,"Name"),r.a.createElement(V,Object.assign({value:c.name,type:"text",allowClear:!0},a("name",{validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:Z}]}),{errors:o("name")}))),r.a.createElement("div",{className:"form-item"},r.a.createElement(_.a,{type:"mail"}),r.a.createElement("label",null,"Email"),r.a.createElement(V,Object.assign({value:c.mail,type:"email",allowClear:!0},a("email",{validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:$}]}),{errors:o("email")}))),r.a.createElement("div",{className:"form-item"},r.a.createElement(_.a,{type:"lock"}),r.a.createElement("label",null,"Password"),r.a.createElement(V,Object.assign({type:"password",allowClear:!0},a("password",{validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:Q}]}),{errors:o("password")}))),r.a.createElement("p",{className:"error"},s),r.a.createElement("div",{className:"form-item"},r.a.createElement("div",{className:"form-item-submit"},r.a.createElement("button",{type:"submit",className:"my-button next-button"},"Next")))),!0===i&&r.a.createElement(n.Fragment,null,r.a.createElement("h4",{className:"choose-register-title"},"Choose 3 or more books that you like"),r.a.createElement("div",{className:"register-books-container"},h),r.a.createElement("div",{className:"form-item-submit"},!p&&r.a.createElement("button",{type:"submit",className:"my-button post-button disabled-button",onClick:this.submitRegister,disabled:!0},"Register"),p&&r.a.createElement("button",{type:"submit",className:"my-button post-button",onClick:this.submitRegister},"Register"))))}}]),t}(n.Component),ae=z()(te),ne=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(I,null),r.a.createElement("div",{className:"screen-wrapper"},r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",{className:"reg-title"},"Register"),r.a.createElement(ae,null))))},re={getUser:function(e){return w.get("/users/".concat(e,"/profile")).then(function(e){return e.data})},getUsers:function(){return w.get("/users/").then(function(e){return e.data})},getSocialUsers:function(e){return w.get("/users/".concat(e,"/friends")).then(function(e){return e.data})},followUser:function(e){return w.post("/users/".concat(e,"/follow")).then(function(e){return e.data})},unfollowUser:function(e){return w.delete("/users/".concat(e,"/follow")).then(function(e){return e.data})}},oe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:"",isAuthenticated:!1},a.submitLogin=function(e){var t=a.props.form;e.preventDefault(),t.validateFields(function(e,t){e&&Object.keys(e).length>0||G.login(t).then(function(e){re.getUser(e.id).then(function(e){a.props.onUserChanged(e),a.setState({isAuthenticated:!0})})},function(e){var t=e.response.data.message;a.setState({error:t})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldProps,a=e.getFieldError,n=this.state,o=n.error;return n.isAuthenticated?r.a.createElement(d.a,{to:"/home"}):r.a.createElement("div",{className:"reg-container"},r.a.createElement("form",{onSubmit:this.submitLogin,className:"reg-form"},r.a.createElement("div",{className:"form-item"},r.a.createElement(_.a,{type:"mail"}),r.a.createElement("label",null,"Email"),r.a.createElement(V,Object.assign({type:"email",allowClear:!0},t("email",{validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:$}]}),{errors:a("email")}))),r.a.createElement("div",{className:"form-item"},r.a.createElement(_.a,{type:"lock"}),r.a.createElement("label",null,"Password"),r.a.createElement(V,Object.assign({type:"password",allowClear:!0},t("password",{validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:Q}]}),{errors:a("password")}))),r.a.createElement("p",{className:"error"},o),r.a.createElement("div",{className:"form-item"},r.a.createElement("div",{className:"form-item-submit"},r.a.createElement("button",{type:"submit",className:"my-button next-button"},"Log in")))))}}]),t}(n.Component),le=N(z()(oe)),ce=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(I,null),r.a.createElement("div",{className:"screen-wrapper"},r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",{className:"reg-title"},"Login"),r.a.createElement(le,null))))};A.b.add(L.f),A.b.add(L.d),A.b.add(L.j),A.b.add(L.i);var se=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"usernavbar"},r.a.createElement("ul",{className:"usernavbar-container"},r.a.createElement("li",null,r.a.createElement(p.c,{className:"nav-link",activeClassName:"active",to:"/home"},r.a.createElement("div",{className:"usernavbar-item"},r.a.createElement(R.a,{icon:"home"})))),r.a.createElement("li",null,r.a.createElement(p.c,{className:"nav-link",activeClassName:"active",to:"/explore"},r.a.createElement("div",{className:"usernavbar-item"},r.a.createElement(R.a,{icon:"compass"})))),r.a.createElement("li",null,r.a.createElement(p.c,{className:"nav-link",activeClassName:"active",to:"/friends"},r.a.createElement("div",{className:"usernavbar-item"},r.a.createElement(R.a,{icon:"users"})))),r.a.createElement("li",null,r.a.createElement(p.c,{className:"nav-link",activeClassName:"active",to:"/profile"},r.a.createElement("div",{className:"usernavbar-item"},r.a.createElement(R.a,{icon:"user-circle"}))))))}}]),t}(n.Component),ie=a(326),ue=a.n(ie),me=a(590),de=a(172),pe=function(e){var t=e.onSearch,a=e.uploadCover;return r.a.createElement("div",{className:"field explore-search-bar"},r.a.createElement(H.a,{className:"input",type:"text",placeholder:"Search",allowClear:!0,onChange:function(e){return t(e.target.value)}}),r.a.createElement(me.a,{className:"upload-cover-book",name:"cover",listType:"picture",beforeUpload:function(e){return a(e),!1}},r.a.createElement(de.a,{htmlType:"button"},r.a.createElement(_.a,{type:"camera",style:{fontSize:"20px"}}))))},he=function(e){var t=e.book,a=t.imageLink,n=t.title,o=t.id,l=function(){if(e.book.authors){var t=[e.book.authors];return 1===t.length&&(t=t[0]),t.length>1&&(t=t.join(" & ")),t}return""}();return r.a.createElement("li",{className:"collection-item avatar"},r.a.createElement("div",null,r.a.createElement("img",{src:a,alt:n,className:"avatar-img-book"})),r.a.createElement("div",{className:"avatar-info-book"},r.a.createElement(p.b,{to:"/explore/".concat(o)},r.a.createElement("span",{className:"title"},r.a.createElement("strong",null,n)),r.a.createElement("p",{className:"authors-item"},l))))},fe=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=[];return e=""!==this.props.books?this.props.books.map(function(e){return r.a.createElement(he,{book:e,key:e.id})}):r.a.createElement("li",{className:"collection-item avatar"},r.a.createElement("span",{className:"title"},r.a.createElement("strong",null,"Not books found"))),r.a.createElement("div",{className:"booklist-container"},r.a.createElement("ul",{className:"collection"},e))}}]),t}(n.Component);A.b.add(L.h);var ge=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],loading:!1},a.componentDidMount=function(){a.setState({loading:!0},function(){B.getBestRatedBooks(5).then(function(e){a.setState({books:e,loading:!1})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.books.sort(function(){return.5-Math.random()}).map(function(e){return r.a.createElement(S,{key:e.id,book:e,badge:r.a.createElement(r.a.Fragment,null,e.googleRating," ",r.a.createElement(R.a,{icon:"star"}))})}),t=this.state.loading;return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h4",{className:"category-title"},"Best rated books"),t&&r.a.createElement(C,null),!t&&r.a.createElement("ul",{className:"book-container"},r.a.createElement(v.a,O,e)))}}]),t}(n.Component),be=N(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],loading:!1},a.componentDidMount=function(){var e=a.props.user.favGenres.join(",");a.setState({loading:!0},function(){B.getRelatedBooks(e).then(function(e){a.setState({books:e,loading:!1})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.books.sort(function(){return.5-Math.random()}).map(function(e){var t=e.genres[0];return t.includes(" ")&&(t=t.substr(0,t.indexOf(" "))),r.a.createElement(S,{key:e.id,book:e,badge:t})}),t=this.state.loading;return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h4",{className:"category-title"},"Books that you will like"),t&&r.a.createElement(C,null),!t&&r.a.createElement("ul",{className:"book-container"},r.a.createElement(v.a,O,e)))}}]),t}(n.Component)),ve=a(591),Ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],genre:"",loading:!1},a.handleSelectChange=function(e){var t=e;a.handleGenreBooks(t)},a.handleGenreBooks=function(e){a.setState({loading:!0},function(){B.getRelatedBooks(e).then(function(e){a.setState({books:e,loading:!1})})})},a.componentDidMount=function(){a.handleGenreBooks("Fiction")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.books.sort(function(){return.5-Math.random()}).map(function(e){var t=e.genres[0];return t.includes(" ")&&(t=t.substr(0,t.indexOf(" "))),r.a.createElement(S,{key:e.id,book:e,badge:t})}),t=this.state.loading;return r.a.createElement("div",{className:"category-screen"},r.a.createElement("div",{className:"genre-input"},r.a.createElement("h4",{className:"category-title"},"Books by genre"),r.a.createElement(ve.a,{className:"pages-period-select",defaultValue:"Fiction",onChange:this.handleSelectChange},r.a.createElement(ve.a.Option,{value:"Biography & Autobiography"},"Biography & Autobiography"),r.a.createElement(ve.a.Option,{value:"Business & Economics"},"Business & Economics"),r.a.createElement(ve.a.Option,{value:"Fiction"},"Fiction"),r.a.createElement(ve.a.Option,{value:"Health & Fitness"},"Health & Fitness"),r.a.createElement(ve.a.Option,{value:"Juvenile Nonfiction"},"Juvenile Nonfiction"),r.a.createElement(ve.a.Option,{value:"History"},"History"),r.a.createElement(ve.a.Option,{value:"Literary Collections"},"Literary Collections"),r.a.createElement(ve.a.Option,{value:"Performing Arts"},"Performing Arts"),r.a.createElement(ve.a.Option,{value:"Political Science"},"Political Science"),r.a.createElement(ve.a.Option,{value:"Self-Help"},"Self-Help"),r.a.createElement(ve.a.Option,{value:"Social Science"},"Social Science"))),t&&r.a.createElement(C,null),!t&&r.a.createElement("ul",{className:"book-container"},r.a.createElement(v.a,O,e)))}}]),t}(n.Component),ye=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],search:"",coverBook:!1,loading:!1},a.onSearch=ue()(function(e){a.setState({search:e}),e.length>3&&B.getSearchedBook(e).then(function(e){a.setState({books:e})})},1e3),a.uploadCover=function(e){a.setState({loading:!0}),B.postCoverBook(e).then(function(e){a.setState({books:e,coverBook:!0,loading:!1})})},a.closeCoverSearch=function(){a.setState({search:"",coverBook:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.books,a=e.search,o=e.coverBook,l=e.loading;return r.a.createElement("div",{className:"screen-container"},r.a.createElement(pe,{onSearch:this.onSearch.bind(this),uploadCover:this.uploadCover.bind(this)}),(a||o)&&r.a.createElement(fe,{books:t}),o&&r.a.createElement(_.a,{type:"close-circle",className:"close-cover-search",onClick:this.closeCoverSearch}),l&&r.a.createElement(C,null),!a&&!o&&!l&&r.a.createElement(n.Fragment,null,r.a.createElement(be,null),r.a.createElement(ge,null),r.a.createElement(x,null),r.a.createElement(Ee,null)))}}]),t}(n.Component),ke={createGoal:function(e){return w.post("/users/creategoal",e).then(function(e){return e.data})},getGoals:function(){return w.get("/users/goals").then(function(e){return e.data})},getLastGoals:function(e){return w.post("/users/goals/".concat(e)).then(function(e){return e.data})}},Ne=N(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={pagesDay:0},a.handlePagesChange=function(e){var t=e.target.value;a.setState({pagesDay:t})},a.handlePagesSubmit=function(e){e.preventDefault();var t={pagesDay:a.state.pagesDay};t.pagesDay>0&&(ke.createGoal(t).then(),a.props.user.pagesGoal<=a.state.pagesDay?a.props.congratsBox(!0):a.props.congratsBox(!1))},a.valuePages=function(){ke.getLastGoals(1).then(function(e){if(0!==e.length){var t=new Date,n=new Date(e[0].updatedAt),r=t.getDate()===n.getDate(),o=t.getMonth()===n.getMonth(),l=t.getFullYear()===n.getFullYear();r&&o&&l&&a.setState({pagesDay:e[0].pagesDay})}})},a.componentDidMount=function(){a.valuePages()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.pagesDay;return r.a.createElement("div",{className:"pages-read-container"},r.a.createElement("h4",{className:"how-many-pages-title"},"How many pages did you read today?"),r.a.createElement("div",{className:"pages-read-today"},r.a.createElement("div",{className:"input-field pages-input"},r.a.createElement("input",{type:"number",name:"pages",onChange:this.handlePagesChange,value:e})),r.a.createElement("button",{className:"my-button confirm-pages",onClick:this.handlePagesSubmit},"pages read today")))}}]),t}(n.Component)),Oe=a(108),je=a(170),we=a.n(je),Be=N(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={period:"month",pagesRead:0,data:[]},a.handlePeriodChange=function(e){var t=e;a.handleDataGraphic(t)},a.handleDataGraphic=function(e){var t=[],n=function(e,a){t.unshift({x:e,y:a})};switch(e){case"year":ke.getLastGoals(365).then(function(r){if(r){var o=!0,l=!1,c=void 0;try{for(var s,i=r[Symbol.iterator]();!(o=(s=i.next()).done);o=!0){var u=s.value,m=new Date(u.updatedAt);n(Oe.DateTime.fromJSDate(m).day+Oe.DateTime.fromJSDate(m).monthShort,u.pagesDay)}}catch(d){l=!0,c=d}finally{try{o||null==i.return||i.return()}finally{if(l)throw c}}}a.setDataGraphic(t,e)});break;case"month":ke.getLastGoals(30).then(function(r){if(r){var o=!0,l=!1,c=void 0;try{for(var s,i=r[Symbol.iterator]();!(o=(s=i.next()).done);o=!0){var u=s.value,m=new Date(u.updatedAt);n(Oe.DateTime.fromJSDate(m).day+Oe.DateTime.fromJSDate(m).monthShort,u.pagesDay)}}catch(d){l=!0,c=d}finally{try{o||null==i.return||i.return()}finally{if(l)throw c}}}a.setDataGraphic(t,e)});break;case"week":default:ke.getLastGoals(7).then(function(r){if(r){var o=!0,l=!1,c=void 0;try{for(var s,i=r[Symbol.iterator]();!(o=(s=i.next()).done);o=!0){var u=s.value,m=new Date(u.updatedAt);n(Oe.DateTime.fromJSDate(m).weekdayShort+Oe.DateTime.fromJSDate(m).day,u.pagesDay)}}catch(d){l=!0,c=d}finally{try{o||null==i.return||i.return()}finally{if(l)throw c}}}a.setDataGraphic(t,e)})}},a.setDataGraphic=function(e,t){var n=e.reduce(function(e,t){return e+t.y},0);a.setState({data:e,period:t,pagesRead:n})},a.componentDidMount=function(){a.handleDataGraphic("month")},a.componentDidUpdate=function(e){e.refresh!==a.props.refresh&&a.handleDataGraphic(a.state.period)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.pagesRead,n=[{id:"Pages",data:Object(J.a)(t)}],o=r.a.createElement(h.a,{data:n,margin:{top:30,right:20,bottom:30,left:20},curve:"natural",axisTop:null,axisRight:null,axisBottom:null,axisLeft:null,enableGridY:!1,enableGridX:!1,lineWidth:7,dotSize:0,colors:"#fafafa",dotColor:"inherit:darker(1)",dotLabelYOffset:-15,isInteractive:!1,enableStackTooltip:!1,animate:!0,motionStiffness:100,motionDamping:5});return r.a.createElement("div",{className:"category-screen"},r.a.createElement("div",{className:"pages-read-wrapper"},r.a.createElement(we.a,{className:"pages-read-count",start:0,duration:3,end:a,redraw:!0}),r.a.createElement("h4",{className:"pages-read-in"},"pages read in"),r.a.createElement(ve.a,{className:"pages-period-select",defaultValue:"month",onChange:this.handlePeriodChange},r.a.createElement(ve.a.Option,{value:"week"},"the last week"),r.a.createElement(ve.a.Option,{value:"month"},"the last month"),r.a.createElement(ve.a.Option,{value:"year"},"the last year"))),r.a.createElement("div",{className:"chart-graphic"},o))}}]),t}(n.Component)),Se=a(59),Ce=a.n(Se),xe=a(89),De=N(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},period:"year",readBooks:[],bookCount:0,loading:!1},a.handlePeriodChange=function(e){var t=e;a.handleReadPeriod(t)},a.handleReadPeriod=function(e){if("month"===e){var t=a.props.user.userbooks.filter(function(e){return"read"===e.state}).filter(function(e){return new Date(e.createdAt).getMonth()===(new Date).getMonth()}).map(function(e){return e.book}).map(function(){var e=Object(xe.a)(Ce.a.mark(function e(t){return Ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.getOneBook(t).then(function(e){return e}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());Promise.all(t).then(function(e){return a.setState({readBooks:e,bookCount:e.length,loading:!1})})}if("year"===e){var n=a.props.user.userbooks.filter(function(e){return"read"===e.state}).filter(function(e){return new Date(e.createdAt).getYear()===(new Date).getYear()}).map(function(e){return e.book}).map(function(){var e=Object(xe.a)(Ce.a.mark(function e(t){return Ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.getOneBook(t).then(function(e){return e}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());Promise.all(n).then(function(e){return a.setState({readBooks:e,bookCount:e.length,loading:!1})})}},a.componentDidMount=function(){a.setState({user:a.props.user,loading:!0},function(){a.handleReadPeriod(a.state.period)})},a.componentDidUpdate=function(e){e.refresh!==a.props.refresh&&a.handleReadPeriod(a.state.period)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.bookCount,a=e.loading,n="Read in ".concat((new Date).getFullYear()),o=this.state.readBooks.sort(function(){return.5-Math.random()}).map(function(e){return r.a.createElement(S,{key:e.id,book:e,badge:n})});return r.a.createElement("div",{className:"category-screen"},r.a.createElement("div",{className:"pages-read-wrapper"},r.a.createElement(we.a,{className:"pages-read-count",start:0,duration:3,end:t,redraw:!0}),r.a.createElement("h4",{className:"pages-read-in"},"books read in"),r.a.createElement(ve.a,{className:"pages-period-select",defaultValue:"year",onChange:this.handlePeriodChange},r.a.createElement(ve.a.Option,{value:"month"},"the last month"),r.a.createElement(ve.a.Option,{value:"year"},"the last year"))),r.a.createElement("div",{className:"motivation-space-category"}),r.a.createElement("div",{className:"category-screen"},r.a.createElement("h4",{className:"category-title"},"Books you have read"),a&&r.a.createElement(C,null),!a&&r.a.createElement("ul",{className:"book-container"},r.a.createElement(v.a,O,o))))}}]),t}(n.Component)),Pe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={congratsBox:!1,congratsText:"",refreshChart:!0},a.handleCongratsText=function(e){e?a.setState({congratsBox:!0,congratsText:"Congrats!! You rocked your goal!"}):a.setState({congratsBox:!0,congratsText:"Good!! It's better than nothing. Keep improving to reach your daily goal."})},a.closeCongratsBox=function(){a.setState({congratsBox:!1,congratsText:"",refreshChart:!a.state.refreshChart})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.congratsText,a=e.refreshChart;return r.a.createElement("div",{className:"screen-container"},t&&r.a.createElement("div",{className:"congrats-box"},r.a.createElement("div",{className:"congrats-text"},r.a.createElement("p",null,t),r.a.createElement("button",{className:"my-button congrats-button",onClick:this.closeCongratsBox},"Close"))),r.a.createElement(Be,{refresh:a}),r.a.createElement(Ne,{congratsBox:this.handleCongratsText}),r.a.createElement("div",{className:"motivation-space-section"}),r.a.createElement(De,{refresh:a}))}}]),t}(n.Component),Fe=a(140),Ae=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user,book:a.props.book},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.user,t=e.id,a=e.name,n=e.avatarURL,o=this.state.book;return r.a.createElement("li",{className:"collection-item avatar"},r.a.createElement(p.b,{to:"/friends/".concat(t)},r.a.createElement("img",{src:n,alt:a,className:"circle"}),r.a.createElement("span",{className:"title"},r.a.createElement("strong",null,a)),o?r.a.createElement("p",{className:"currently-reading"},"Currently reading:"," ",r.a.createElement("span",{className:"currently-reading-text"},r.a.createElement("span",{className:"currently-reading-title"}," ",o.title)," ")):r.a.createElement("p",{className:"currently-reading"},"Not currently reading")),r.a.createElement("a",{href:"#!",className:"secondary-content"},r.a.createElement("i",{className:"material-icons"})))}}]),t}(n.Component),Re=N(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],trendingBooks:[],loading:!0},a.componentDidMount=function(){re.getUsers().then(function(e){e=(e=e.filter(function(e){return e.id!==a.props.user.id})).map(function(){var e=Object(xe.a)(Ce.a.mark(function e(t){var a,n;return Ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.userbooks.find(function(e){return"reading"===e.state}),n=t.userbooks.find(function(e){return"pending"===e.state}),!a||!n){e.next=6;break}return e.abrupt("return",Promise.all([B.getOneBook(a.book),B.getOneBook(n.book)]).then(function(e){var a=Object(Fe.a)(e,2),n=a[0],r=a[1];return t.readingBook={id:n.id,title:n.title,authors:n.authors,imageLink:n.imageLink},t.pendingBook={id:r.id,title:r.title,authors:r.authors,imageLink:r.imageLink,user:t.name},t}));case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Promise.all(e).then(function(e){var t=e.map(function(e){if(e.pendingBook)return e.pendingBook});t=t.filter(function(e){return void 0!==e}),a.setState({users:e,trendingBooks:t},function(){return a.setState({loading:!1})})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.loading;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"category-screen"},r.a.createElement("h2",{className:"category-title"},"Discover what other people are reading"),r.a.createElement("div",{className:"friendslist-container"},r.a.createElement("ul",{className:"collection"},e?r.a.createElement(C,null):this.state.users.map(function(e){return e.readingBook?r.a.createElement(Ae,{user:e,book:e.readingBook,key:e.id}):r.a.createElement(Ae,{user:e,key:e.id})})))),r.a.createElement("div",{className:"friends-space-category"}),r.a.createElement("div",{className:"category-screen"},r.a.createElement("h4",{className:"category-title"},"Books that your friends want to read"),e&&r.a.createElement(C,null),!e&&r.a.createElement("ul",{className:"book-container"},r.a.createElement(v.a,O,this.state.trendingBooks.sort(function(){return.5-Math.random()}).map(function(e){return r.a.createElement(S,{key:e.id,book:e,badge:e.user})})))))}}]),t}(n.Component)),Le=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"screen-container"},r.a.createElement(Re,null))}}]),t}(n.Component),Ge=N(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],loading:!0},a.componentDidMount=function(){var e=a.props.match.params.followstate;if("following"===e){var t=a.props.user.following.map(function(){var e=Object(xe.a)(Ce.a.mark(function e(t){return Ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.getUser(t.followed).then(function(e){var t=e.userbooks.find(function(e){return"reading"===e.state});return t?B.getOneBook(t.book).then(function(t){return e.readingBook={id:t.id,title:t.title,authors:t.authors,image:t.imageLink},e}):e}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());Promise.all(t).then(function(e){a.setState({users:e,loading:!1})})}if("followers"===e){var n=a.props.user.followers.map(function(){var e=Object(xe.a)(Ce.a.mark(function e(t){return Ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.getUser(t.follower).then(function(e){var t=e.userbooks.find(function(e){return"reading"===e.state});return t?B.getOneBook(t.book).then(function(t){return e.readingBook={id:t.id,title:t.title,authors:t.authors,image:t.imageLink},e}):e}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());Promise.all(n).then(function(e){a.setState({users:e,loading:!1})})}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.loading,t=this.props.match.params.followstate;return r.a.createElement("div",{className:"screen-container"},r.a.createElement("div",{className:"category-screen"},"following"===t&&r.a.createElement("h2",{className:"category-title"},"Friends that you follow"),"followers"===t&&r.a.createElement("h2",{className:"category-title"},"Friends who follow you"),r.a.createElement("div",{className:"friendslist-container"},r.a.createElement("ul",{className:"collection"},e?r.a.createElement(C,null):this.state.users.map(function(e){return e.readingBook?r.a.createElement(Ae,{user:e,book:e.readingBook,key:e.id}):r.a.createElement(Ae,{user:e,key:e.id})})))))}}]),t}(n.Component)),Te=a(592),Ue={getProfileBooks:function(e){return w.get("/users/books",{params:{state:e}}).then(function(e){return e.data})},getStateBook:function(e){return w.get("/users/books/".concat(e)).then(function(e){return e.data})},createStateBook:function(e,t){return w.post("/users/books/".concat(e,"?state=").concat(t)).then(function(e){return e.data})}};A.b.add(L.e),A.b.add(L.b);var Me=Te.a.Panel,Ie=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={book:{},relatedBooks:[],state:""},a.handleStateButton=function(e){var t=e.target.value;a.setState({state:t}),Ue.createStateBook(a.state.book.id,t),Ue.getStateBook(a.state.book.id).then(function(e){a.setState({state:e})})},a.formatDate=function(e){return new Date(e).toLocaleDateString()},a.handleAuthors=function(){if(a.state.book.authors){var e=[a.state.book.authors];return 1===e.length&&(e=e[0]),e.length>1&&(e=e.join(" & ")),e}return""},a.componentDidMount=function(){var e=a.props.match.params.bookId;Promise.all([B.getOneBook(e),Ue.getStateBook(e)]).then(function(e){var t=Object(Fe.a)(e,2),n=t[0],r=t[1],o=n.genres[0];B.getRelatedBooks(o).then(function(e){a.setState({book:n,state:r,relatedBooks:e})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.match.params.bookId;a!==e.match.params.bookId&&Promise.all([B.getOneBook(a),Ue.getStateBook(a)]).then(function(e){var a=Object(Fe.a)(e,2),n=a[0],r=a[1],o=n.genres[0];B.getRelatedBooks(o).then(function(e){t.setState({book:n,state:r,relatedBooks:e})})})}},{key:"render",value:function(){var e=this.state,t=e.book,a=e.state,n=this.handleAuthors(),o=this.formatDate(this.state.book.publishedDate),l=this.state.relatedBooks.filter(function(e){return e.isbn!==t.isbn}).sort(function(){return.5-Math.random()}).map(function(e){var t=e.genres[0];return t.includes(" ")&&(t=t.substr(0,t.indexOf(" "))),r.a.createElement(S,{key:e.id,book:e,badge:t})});return r.a.createElement("div",{className:"screen-container"},r.a.createElement("div",{className:"book-detail-container"},r.a.createElement("div",{className:"book-detail-maininfo"},r.a.createElement("figure",{className:"book-detail-cover"},r.a.createElement("img",{src:t.imageLink,alt:t.title})),r.a.createElement("div",{className:"book-detail-title"},r.a.createElement("h2",{className:"detail-title"},t.title),r.a.createElement("h4",{className:"detail-author"},n))),r.a.createElement("div",{className:"book-detail-buttons collection"},r.a.createElement("button",{className:"pending"===a?"my-button active-state":"my-button pending-button",value:"pending",onClick:this.handleStateButton},"pending"),r.a.createElement("button",{className:"reading"===a?"my-button active-state":"my-button reading-button",value:"reading",onClick:this.handleStateButton},"reading"),r.a.createElement("button",{className:"read"===a?"my-button active-state":"my-button reading-button",value:"read",onClick:this.handleStateButton},"read")),r.a.createElement("div",{className:"book-detail-summary"},r.a.createElement(Te.a,{bordered:!1,defaultActiveKey:[],expandIcon:function(e){var t=e.isActive;return r.a.createElement(_.a,{type:"caret-right",rotate:t?90:0})}},t.googleRating&&r.a.createElement(Me,{header:"Rating",key:"1"},t.googleRating," ",r.a.createElement(_.a,{type:"star",theme:"filled"})," of 5"),t.pageCount&&r.a.createElement(Me,{header:"Page Count",key:"2"},t.pageCount," pages"),o&&r.a.createElement(Me,{header:"Published Date",key:"3"},r.a.createElement(R.a,{icon:"calendar-day"})," ",o),t.googleBuyLink&&t.googlePrice&&r.a.createElement(Me,{header:"Price & Buy Link",key:"4"},r.a.createElement("a",{className:"buy-link-button",href:t.googleBuyLink},t.googlePrice,r.a.createElement(R.a,{icon:"euro-sign"})," in Google Play Store")),t.isbn&&r.a.createElement(Me,{header:"ISBN",key:"5"},"ISBN: ",t.isbn),t.description&&r.a.createElement(Me,{header:"Description",key:"6"},t.description)))),r.a.createElement("div",{className:"category-screen"},r.a.createElement("h4",{className:"category-title"},"Related books"),r.a.createElement("ul",{className:"book-container"},r.a.createElement(v.a,O,l))))}}]),t}(n.Component),Je=a(141),Ye=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleGenres=function(){if(a.props.friend){var e=[a.props.friend.favGenres];return 1===e.length&&(e=e[0]),e.length>1&&(e=e.slice(0,2).join(" & ")),e}return""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.friend,t=e.name,a=e.avatarURL,n=e.followers,o=this.props.userId,l=n.some(function(e){return e.follower===o}),c=this.handleGenres();return r.a.createElement("div",{className:"category-screen"},r.a.createElement("div",{className:"card horizontal profile-card"},r.a.createElement("div",{className:"card-image profile-avatar"},r.a.createElement("img",{src:a||"https://profile.actionsprout.com/default.jpeg",alt:"profile-pic",className:"profile-avatar-img"})),r.a.createElement("div",{className:"card-stacked"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h4",null,t),r.a.createElement("p",null,"Favorite genres: ",r.a.createElement("strong",null,c))),r.a.createElement("div",{className:"card-action profile-link"},!l&&r.a.createElement("button",{className:"my-button follow-button",onClick:this.props.handleFollow},"Follow the reader"),l&&r.a.createElement("button",{className:"my-button unfollow-button",onClick:this.props.handleUnfollow},"Unfollow the reader")))))}}]),t}(n.Component),qe=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.book,a=e.friendName,n=a.substr(0,a.indexOf(" "));return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h2",{className:"category-title"},n," is currently reading"),r.a.createElement("div",{className:"booklist-container"},r.a.createElement("ul",{className:"collection"},r.a.createElement(he,{book:t,key:t.id}))))}}]),t}(n.Component),ze=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={friend:{},books:[]},a.componentDidMount=function(){var e=a.props.friend.favGenres.join(",");B.getRelatedBooks(e).then(function(e){a.setState({books:e})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.books.sort(function(){return.5-Math.random()}).map(function(e){var t=e.genres[0];return t.includes(" ")&&(t=t.substr(0,t.indexOf(" "))),r.a.createElement(S,{key:e.id,book:e,badge:t})}),t=this.props.friend.name,a=t.substr(0,t.indexOf(" "));return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h4",{className:"category-title"},"Books related to what ",a," likes"),r.a.createElement("ul",{className:"book-container"},r.a.createElement(v.a,O,e)))}}]),t}(n.Component),He=N(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={friend:{},readingBook:{},followButton:!1,loading:!0},a.handleFollow=function(){var e=a.state.friend;re.followUser(a.state.friend.id).then(function(t){t&&a.setState({friend:Object(Je.a)({},e,{followers:[].concat(Object(J.a)(e.followers),[t])})})})},a.handleUnfollow=function(){var e=a.state.friend,t=a.props.user;re.unfollowUser(a.state.friend.id).then(function(){a.setState({friend:Object(Je.a)({},e,{followers:e.followers.filter(function(e){return e.follower!==t.id})})})})},a.componentDidMount=function(){var e=a.props.match.params.userId;re.getUser(e).then(function(e){var t=e.userbooks.find(function(e){return"reading"===e.state});t?B.getOneBook(t.book).then(function(t){a.setState({friend:e,readingBook:t,loading:!1})}):a.setState({friend:e,loading:!1})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.friend,a=e.followButton,o=e.loading,l=e.readingBook,c=this.props.user.id;return r.a.createElement("div",{className:"screen-container"},o?r.a.createElement(C,null):r.a.createElement(n.Fragment,null,r.a.createElement(Ye,{friend:t,followButton:a,handleFollow:this.handleFollow,handleUnfollow:this.handleUnfollow,userId:c}),l.title&&r.a.createElement(qe,{book:l,friendName:t.name})),t.name&&r.a.createElement(ze,{friend:t}))}}]),t}(n.Component)),We=N(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={followed:0,following:0},a.componentDidMount=function(){re.getSocialUsers(a.props.user.id).then(function(e){a.setState({followed:e.followers.length,following:e.following.length})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.followed,a=e.following;return r.a.createElement("ul",{className:"collection follow-container"},r.a.createElement("div",{className:"follow-item"},r.a.createElement("div",{className:"follow-content"},r.a.createElement(p.b,{to:"/friends/list/followers"},r.a.createElement("p",null,"Followed by"),r.a.createElement("span",{className:"follow-title"},t),r.a.createElement("p",null,"readers")))),r.a.createElement("div",{className:"follow-item"},r.a.createElement("div",{className:"follow-content"},r.a.createElement(p.b,{to:"/friends/list/following"},r.a.createElement("p",null,"Following"),r.a.createElement("span",{className:"follow-title"},a),r.a.createElement("p",null,"readers")))))}}]),t}(n.Component));A.b.add(L.c);var Ve=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user,error:"",editBox:!1,avatar:null},a.handleGenres=function(){if(a.props.user){var e=[a.props.user.favGenres];return 1===e.length&&(e=e[0]),e.length>1&&(e=e.slice(0,2).join(" & ")),e}return""},a.editProfile=function(){a.setState({editBox:!0})},a.cancelEdit=function(){a.setState({user:a.props.user,error:"",editBox:!1,avatar:null})},a.submitProfile=function(e){var t=a.state.avatar,n=a.props.form;e.preventDefault(),n.validateFields(function(e,n){e&&Object.keys(e).length>0||(t&&(n.avatar=t),G.updateProfile(n).then(function(e){a.setState({editBox:!1,user:Object(Je.a)({},a.state.user,e)},function(){a.props.onUserChanged(e)})},function(e){var t=e.response.data.message;a.setState({error:t})}))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.user,o=t.editBox,l=t.error,c=t.avatar,s=this.props.form,i=s.getFieldProps,u=s.getFieldError,m=this.handleGenres();return r.a.createElement(n.Fragment,null,!o&&r.a.createElement("div",{className:"category-screen"},r.a.createElement("div",{className:"card horizontal profile-card"},r.a.createElement("div",{className:"card-image profile-avatar"},r.a.createElement("img",{src:a.avatarURL?a.avatarURL:"https://profile.actionsprout.com/default.jpeg",alt:"profile-pic",className:"profile-avatar-img"})),r.a.createElement("div",{className:"card-stacked"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h4",null,a.name),r.a.createElement("p",null,"Daily goal: ",r.a.createElement("strong",null,a.pagesGoal," pages")),r.a.createElement("p",null,"Genres: ",r.a.createElement("strong",null,m))),r.a.createElement(We,null),r.a.createElement("div",{className:"profile-link"},r.a.createElement(R.a,{icon:"cog",onClick:this.editProfile}))))),o&&r.a.createElement("div",{className:"category-screen"},r.a.createElement("div",{className:"card-horizontal profile-card profile-card-edit"},r.a.createElement("div",{className:"card-image profile-avatar-edit"},r.a.createElement("div",{className:"profile-form-image"},r.a.createElement("img",{src:c?URL.createObjectURL(c):a.avatarURL?a.avatarURL:"https://profile.actionsprout.com/default.jpeg",alt:"profile-pic",className:"profile-avatar-img-edit"}),r.a.createElement(me.a,{className:"upload-pic-button",name:"logo",listType:"picture",beforeUpload:function(t){return e.setState({avatar:t}),!1}},r.a.createElement(de.a,{htmlType:"button"},r.a.createElement(_.a,{type:"upload"})," Change avatar")))),r.a.createElement("div",{className:"card-stacked profile-info"},r.a.createElement("div",{className:"card-content"},r.a.createElement("form",{id:"profile-form",onSubmit:this.submitProfile},r.a.createElement("div",{className:"profile-form-group"},r.a.createElement("label",null,"Name"),r.a.createElement(V,Object.assign({type:"text",allowClear:!0},i("name",{initialValue:a.name,validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:Z}]}),{errors:u("name")}))),r.a.createElement("div",{className:"profile-form-group"},r.a.createElement("label",null,"Email"),r.a.createElement(V,Object.assign({type:"email",allowClear:!0},i("email",{initialValue:a.email,validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0,validator:$}]}),{errors:u("email")}))),r.a.createElement("div",{className:"profile-form-group"},r.a.createElement("label",null,"Pages goal"),r.a.createElement(V,Object.assign({type:"number",allowClear:!0},i("pagesGoal",{initialValue:a.pagesGoal,validateFirst:!0,validateTrigger:"onblur",rules:[{required:!0}]})))),r.a.createElement("p",{className:"error"},l),r.a.createElement("div",{className:"profile-form-group card-action"},r.a.createElement("div",{className:"profile-group-submit"},r.a.createElement("button",{onClick:this.cancelEdit,className:"my-button cancel-button"},"Cancel"),r.a.createElement("button",{type:"submit",className:"my-button update-button"},"Update")))))))))}}]),t}(n.Component),Ke=N(z()(Ve)),Xe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[]},a.componentDidMount=function(){Ue.getProfileBooks(a.props.state).then(function(e){a.setState({books:e})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.books.map(function(e){return r.a.createElement(he,{book:e,key:e.id})});return r.a.createElement("div",{className:"booklist-container"},r.a.createElement("ul",{className:"collection"},e))}}]),t}(n.Component),Ze=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h2",{className:"category-title"},"Books that you have pending"),r.a.createElement(Xe,{state:"pending"}))}}]),t}(n.Component),$e=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h2",{className:"category-title"},"Books that you have read"),r.a.createElement(Xe,{state:"read"}))}}]),t}(n.Component),Qe=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"category-screen"},r.a.createElement("h2",{className:"category-title"},"Books that you are reading"),r.a.createElement(Xe,{state:"reading"}))}}]),t}(n.Component),_e=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"screen-container"},r.a.createElement(Ke,null),r.a.createElement(Qe,null),r.a.createElement(Ze,null),r.a.createElement($e,null))}}]),t}(n.Component),et=a(334),tt=function(e){var t=e.component,a=Object(et.a)(e,["component"]);return r.a.createElement(y.Consumer,null,function(e){var n=e.isAuthenticated;return e.user,r.a.createElement(d.b,Object.assign({},a,{render:function(e){return n()?r.a.createElement(d.a,{to:"/home"}):r.a.createElement(t,e)}}))})},at=N(function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.isAuthenticated();return r.a.createElement("div",{className:"App"},!e&&r.a.createElement(d.d,null,r.a.createElement(tt,{path:"/register",component:ne}),r.a.createElement(tt,{path:"/login",component:ce}),r.a.createElement(d.b,{exact:!0,path:"/",component:D}),r.a.createElement(d.a,{to:"/"})),e&&r.a.createElement(n.Fragment,null,r.a.createElement(I,null),r.a.createElement("div",{className:"screen-wrapper"},r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/home",component:Pe}),r.a.createElement(d.b,{exact:!0,path:"/explore",component:ye}),r.a.createElement(d.b,{exact:!0,path:"/friends",component:Le}),r.a.createElement(d.b,{exact:!0,path:"/profile",component:_e}),r.a.createElement(d.b,{exact:!0,path:"/friends/list/:followstate",component:Ge}),r.a.createElement(d.b,{path:"/explore/:bookId",component:Ie}),r.a.createElement(d.b,{path:"/friends/:userId",component:He}),r.a.createElement(d.a,{to:"/home"}))),r.a.createElement(se,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(p.a,null,r.a.createElement(k,null,r.a.createElement(at,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[336,1,2]]]);
//# sourceMappingURL=main.1a59fbc5.chunk.js.map